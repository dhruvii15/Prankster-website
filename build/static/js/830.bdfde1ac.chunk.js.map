{"version":3,"file":"static/js/830.bdfde1ac.chunk.js","mappings":"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","sources":["Component/PrankLink/Video.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\nimport PrankBtn from './PrankBtn';\r\nimport { Col, Row } from 'react-bootstrap';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPause, faTimes } from '@fortawesome/free-solid-svg-icons';\r\nimport watermark from \"../../img/watermark.png\";\r\nimport share from \"../../img/share.png\";\r\nimport Share from './Share';\r\nimport InterstitialAd from './displayads';\r\n\r\nconst Video = ({ data2 }) => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const frameCaptureTries = useRef(0);\r\n  const [isImageLoaded, setIsImageLoaded] = useState(false);\r\n  const [isShareOpen, setIsShareOpen] = useState(false);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [showAd, setShowAd] = useState(false);\r\n  const [capturedFrame, setCapturedFrame] = useState(null);\r\n  const [showCoverImage, setShowCoverImage] = useState(true);\r\n\r\n  useEffect(() => {\r\n    canvasRef.current = document.createElement('canvas');\r\n  }, []);\r\n\r\n  const handleAdError = () => {\r\n    setShowAd(false); // Hide the ad if there's an error\r\n    setIsShareOpen(true); // Directly show the share component\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (data2?.CoverImage) {\r\n      const img = new Image();\r\n      img.src = data2.CoverImage;\r\n      img.onload = () => setIsImageLoaded(true);\r\n    }\r\n\r\n    // Set a timeout to trigger the error handler in case the ad doesn't load in time\r\n    const adTimeout = setTimeout(() => {\r\n      if (showAd) {\r\n        handleAdError(); // Fallback to share if ad loading fails\r\n      }\r\n    }, 500); // 5 seconds timeout for ad\r\n\r\n    return () => clearTimeout(adTimeout); // Clean up timeout on component unmount\r\n  }, [data2?.CoverImage, showAd]);\r\n\r\n\r\n\r\n  const captureVideoFrame = () => {\r\n    if (!videoRef.current || frameCaptureTries.current >= 5) return;\r\n\r\n    try {\r\n      const video = videoRef.current;\r\n      const canvas = canvasRef.current;\r\n\r\n      if (video.videoWidth === 0 || video.videoHeight === 0) {\r\n        frameCaptureTries.current++;\r\n        setTimeout(captureVideoFrame, 200);\r\n        return;\r\n      }\r\n\r\n      canvas.width = video.videoWidth;\r\n      canvas.height = video.videoHeight;\r\n\r\n      const ctx = canvas.getContext('2d');\r\n      if (!ctx) {\r\n        console.error('Could not get 2D context');\r\n        return;\r\n      }\r\n\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      ctx.drawImage(video, 0, 0, canvas.width, canvas.height);\r\n\r\n      const frameDataUrl = canvas.toDataURL('image/jpeg', 0.5);\r\n\r\n      if (frameDataUrl !== 'data:,' && frameDataUrl.length > 100) {\r\n        setCapturedFrame(frameDataUrl);\r\n      } else {\r\n        frameCaptureTries.current++;\r\n        setTimeout(captureVideoFrame, 200);\r\n      }\r\n    } catch (error) {\r\n      console.error('Frame capture error:', error);\r\n      frameCaptureTries.current++;\r\n      setTimeout(captureVideoFrame, 200);\r\n    }\r\n  };\r\n\r\n  const onShareClick = () => {\r\n    setShowAd(true);\r\n  };\r\n\r\n  const handleAdComplete = () => {\r\n    setShowAd(false);\r\n    setIsShareOpen(true);\r\n  };\r\n\r\n  const startVideoWithSound = async () => {\r\n    if (!videoRef.current) return;\r\n\r\n    try {\r\n      const video = videoRef.current;\r\n      video.volume = 1;\r\n      video.muted = false;\r\n\r\n      frameCaptureTries.current = 0;\r\n\r\n      video.addEventListener('loadedmetadata', () => {\r\n        captureVideoFrame();\r\n      }, { once: true });\r\n\r\n      await video.play();\r\n      setIsPlaying(true);\r\n      setShowCoverImage(false);\r\n\r\n      const captureDelays = [100, 300];\r\n      captureDelays.forEach(delay => {\r\n        setTimeout(() => {\r\n          if (!capturedFrame) {\r\n            captureVideoFrame();\r\n          }\r\n        }, delay);\r\n      });\r\n\r\n    } catch (error) {\r\n      console.error('Error playing video:', error);\r\n      if (data2?.CoverImage) {\r\n        setCapturedFrame(data2.CoverImage);\r\n      }\r\n    }\r\n  };\r\n\r\n  const getBackgroundStyle = () => {\r\n    if (capturedFrame) {\r\n      return `url('${capturedFrame}')`;\r\n    }\r\n    if (isImageLoaded && data2?.CoverImage) {\r\n      return `url('${data2.CoverImage}')`;\r\n    }\r\n    return 'none';\r\n  };\r\n\r\n  const blurredBgStyle = {\r\n    backgroundImage: getBackgroundStyle(),\r\n    backgroundRepeat: 'no-repeat',\r\n    backgroundPosition: 'center',\r\n    backgroundSize: 'cover',\r\n    filter: 'blur(8px)',\r\n    transform: 'scale(1.1)',\r\n    width: '100%',\r\n    height: '100%'\r\n  };\r\n\r\n  return (\r\n    <div className=\"full-page-background\">\r\n      {showAd && <InterstitialAd onAdComplete={handleAdComplete} onAdError={handleAdError} />}\r\n      <div className=\"content-container\">\r\n        <Row className=\"content px-3 overflow-hidden flex-grow-1\">\r\n          <Col className=\"d-flex flex-column justify-content-center align-items-center\">\r\n            <div className=\"img-div3 position-relative rounded-4 overflow-hidden border border-white\">\r\n              <div className=\"blurred-bg\" style={blurredBgStyle}></div>\r\n\r\n              <video\r\n                ref={videoRef}\r\n                loop\r\n                playsInline\r\n                className='w-100 h-100 position-absolute'\r\n                style={{ display: showCoverImage ? 'none' : 'block' }}\r\n              >\r\n                <source src={data2.File} type=\"video/mp4\" />\r\n                Your browser does not support the video tag.\r\n              </video>\r\n\r\n              {!isImageLoaded && (\r\n                <div className=\"loading-placeholder rounded-4\" style={{\r\n                  position: 'absolute',\r\n                  top: 0,\r\n                  left: 0,\r\n                  right: 0,\r\n                  bottom: 0,\r\n                  background: 'rgba(0,0,0,0.5)',\r\n                  display: 'flex',\r\n                  justifyContent: 'center',\r\n                  alignItems: 'center',\r\n                  zIndex: 2\r\n                }}>\r\n                  <div className=\"spinner-border text-light\" role=\"status\">\r\n                    <span className=\"visually-hidden\">Loading...</span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {isImageLoaded && (\r\n                <>\r\n                  {showCoverImage && (\r\n                    <div className=\"cover-image-overlay\">\r\n                      <div\r\n                        className=\"close-button position-absolute text-black cursor\"\r\n                        onClick={startVideoWithSound}\r\n                        role=\"button\"\r\n                        aria-label=\"Close cover image\"\r\n                        tabIndex={0}\r\n                        onKeyPress={(e) => e.key === 'Enter' && startVideoWithSound()}\r\n                        style={{ zIndex: 2 }}\r\n                      >\r\n                        <FontAwesomeIcon icon={faTimes} />\r\n                      </div>\r\n                      <img\r\n                        src={data2.CoverImage}\r\n                        alt=\"Cover\"\r\n                        className=\"full-cover-image\"\r\n                      />\r\n                    </div>\r\n                  )}\r\n\r\n                  <div>\r\n                    <div\r\n                      className=\"share-btn position-absolute text-black cursor-pointer\"\r\n                      onClick={onShareClick}\r\n                      role=\"button\"\r\n                      aria-label=\"Share this content\"\r\n                      tabIndex={0}\r\n                      onKeyPress={(e) => e.key === 'Enter' && onShareClick()}\r\n                      style={{ zIndex: 3 }}\r\n                    >\r\n                      <img src={share} alt='share' width={20} style={{ paddingRight: \"2px\" }} />\r\n                    </div>\r\n                    <Share\r\n                      show={isShareOpen}\r\n                      onHide={() => setIsShareOpen(false)}\r\n                      data2={data2}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className='position-absolute text-black' style={{ left: \"-22px\", top: \"-23px\", zIndex: 3 }}>\r\n                    <img src={watermark} alt='Prankster' width={120} />\r\n                  </div>\r\n\r\n                  {isPlaying && (\r\n                    <div\r\n                      className='share-btn2 position-absolute'\r\n                      style={{\r\n                        left: \"5px\",\r\n                        bottom: \"10px\",\r\n                        zIndex: 3,\r\n                        cursor: 'pointer'\r\n                      }}\r\n                    >\r\n                      <FontAwesomeIcon icon={faPause} className='fs-5 text-black' />\r\n                    </div>\r\n                  )}\r\n                </>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"mt-3\">\r\n              <PrankBtn />\r\n            </div>\r\n          </Col>\r\n        </Row>\r\n      </div>\r\n\r\n      <style>{`\r\n        .content-container {\r\n          position: relative;\r\n          z-index: 2;\r\n          width: 100%;\r\n          display: flex;\r\n          flex-direction: column;\r\n          min-height: 100vh;\r\n        }\r\n\r\n        .blurred-bg {\r\n          position: absolute;\r\n          top: 0;\r\n          left: 0;\r\n          right: 0;\r\n          bottom: 0;\r\n          background-size: cover;\r\n          background-position: center;\r\n          filter: blur(8px);\r\n          z-index: 0;\r\n          transition: background-image 0.01s ease;\r\n        }\r\n\r\n        .content {\r\n          color: white;\r\n          text-align: center;\r\n          flex: 1;\r\n          display: flex;\r\n          align-items: center;\r\n        }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Video;"],"names":["_ref","data2","videoRef","useRef","canvasRef","frameCaptureTries","isImageLoaded","setIsImageLoaded","useState","isShareOpen","setIsShareOpen","isPlaying","setIsPlaying","showAd","setShowAd","capturedFrame","setCapturedFrame","showCoverImage","setShowCoverImage","useEffect","current","document","createElement","handleAdError","CoverImage","img","Image","src","onload","adTimeout","setTimeout","clearTimeout","captureVideoFrame","video","canvas","videoWidth","videoHeight","width","height","ctx","getContext","console","error","clearRect","drawImage","frameDataUrl","toDataURL","length","onShareClick","startVideoWithSound","async","volume","muted","addEventListener","once","play","forEach","delay","blurredBgStyle","backgroundImage","backgroundRepeat","backgroundPosition","backgroundSize","filter","transform","_jsxs","className","children","_jsx","InterstitialAd","onAdComplete","handleAdComplete","onAdError","Row","Col","style","ref","loop","playsInline","display","File","type","position","top","left","right","bottom","background","justifyContent","alignItems","zIndex","role","_Fragment","onClick","tabIndex","onKeyPress","e","key","FontAwesomeIcon","icon","faTimes","alt","share","paddingRight","Share","show","onHide","watermark","cursor","faPause","PrankBtn"],"sourceRoot":""}